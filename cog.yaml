build:
  gpu: true
  python_version: "3.8"
  system_packages:
    - "libgl1-mesa-glx"
    - "libglib2.0-0"
    - "libsndfile1-dev"
    - "ffmpeg"
  python_packages:
    # - "ipython==7.30.1"
    - "numpy>=1.21.4"
    # # - "tensorflow==2.5.0"
    # - "click==7.1.2"
    # - "pretty_midi==0.2.9"
    # - "librosa==0.8.0"
    # # - "madmom==0.16.1"
    # - "pillow==8.3.2"
    # - "pyyaml==5.3.1"
    # - "jsonschema==3.2.0"
    # - "tqdm==4.49.0"
    # # - "vamp==1.1.0"
    # - "urllib3==1.26.4"
    # - "spleeter==2.4.0"
    # - "mir_eval==0.6"

  run:
    - pip install -U pip
    - pip install --upgrade cython
    # - pip install omnizart
    - apt-get update && apt-get install -y fluidsynth
    - pip install pyfluidsynth
    - pip install madmom
    - pip install vamp
    - pip install tensorflow
    - pip install git+https://github.com/e7mac/omnizart.git

predict: "scripts/predict.py:Predictor"
